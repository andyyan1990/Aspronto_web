!function(e){e(document).ready(function(){function t(e){var t=["gallery","audio","video","quote","link"];a.children("div.format").css("display","none"),e&&-1!==t.indexOf(e)?a.children("div.format."+e).add(n).css("display",""):n.css("display","none")}e("body").on("change","input[name=loftocean-featured-post-inline-edit]",function(t){if(e(this).attr("data-id")&&loftocean_admin&&loftocean_admin.featured_post){var a=loftocean_admin.featured_post.url,i={action:loftocean_admin.featured_post.action,post_id:e(this).attr("data-id"),loftocean_featured_post:e(this).attr("checked")?"on":"off",nonce:loftocean_admin.featured_post.nonce};e.post(a,i)}}).on("change","select.loftocean-author-widget-choose-by",function(t){var a=e(this).val(),i=e(this).parent().siblings(".author-list-choices");switch(i.css("display","none"),a){case"name":i.filter(".author-list-by-name").css("display","");break;case"role":i.filter(".author-list-by-role").css("display","")}});var a=!1;if(e("#loftocean-tmpl-format-meta-box").length&&e("#formatdiv").length){var i=e("#formatdiv"),o=e("#loftocean-tmpl-format-meta-box"),n=!1;i.find(".inside").append(o.html()),a=i.find("#loftocean-format-media"),n=a.children("h4"),t(o.attr("data-format")||""),e("body").on("change","input[name=post_format]",function(a){t(e(this).val())}).on("click","#loftocean-format-media .format-media",function(t){t.preventDefault(),e(this).hasClass("gallery")?d.gallery.open():e(this).hasClass("video")?d.video.open():e(this).hasClass("audio")&&d.audio.open()}).on("change","#loftocean-format-media textarea",function(t){e(this).siblings("input[type=hidden]").length&&e(this).siblings("input[type=hidden]").val("")})}wp.loftocean={},wp.loftocean_media_tools=function(){return wp.loftocean.gallery=new wp.media({frame:"post",state:"gallery-edit",title:wp.media.view.l10n.editGalleryTitle,"media-sidebar":!1,editing:!1}),wp.loftocean.audio=new wp.media({library:{type:"audio"},title:wp.media.view.l10n.addMedia,multiple:!1}),wp.loftocean.video=new wp.media({library:{type:"video"},title:wp.media.view.l10n.addMedia,multiple:!1}),wp.loftocean.gallery.on("update",function(e){var t=wp.loftocean.gallery.state();(e=e||t.get("selection"))&&(a.find(".gallery-id").val(wp.loftocean.gallery.states.get("gallery-edit").get("library").pluck("id").join(",")),a.find(".gallery-code").val(wp.media.gallery.shortcode(e).string()))}).on("open",function(){var e=wp.loftocean.gallery.states.get("gallery-edit").get("library"),t=a.find(".gallery-id").val();t&&(t=t.split(",")).forEach(function(t){var a=wp.media.attachment(t);a.fetch(),e.add(a?[a]:[])})}),wp.loftocean.video.on("select",function(e){var t=wp.loftocean.video.state(),i={},o={};i={width:(o=(e=e||t.get("selection").first()).toJSON()).width,height:o.height,src:o.url},a.find(".video-id").val(o.id),a.find(".video-code").val(wp.media.video.shortcode(i).string())}).on("open",function(){var e=wp.loftocean.video.state().get("selection"),t=a.find(".video-id").val();if(t){var i=wp.media.attachment(t);i.fetch(),e.add(i?[i]:[])}}),wp.loftocean.audio.on("select",function(e){var t=wp.loftocean.audio.state(),i={},o={};o=(e=e||t.get("selection").first()).toJSON(),i.src=o.url,a.find(".audio-id").val(o.id),a.find(".audio-code").val(wp.media.audio.shortcode(i).string())}).on("open",function(){var e=wp.loftocean.audio.state().get("selection"),t=a.find(".audio-id").val();if(t){var i=wp.media.attachment(t);i.fetch(),e.add(i?[i]:[])}}),wp.loftocean};var d=new wp.loftocean_media_tools;e(".page-video-meta-box").length&&(a=e(".page-video-meta-box"),e("body").on("click",".ceramag-page-upload-video",function(e){e.preventDefault(),d.video.open()}).on("change",".page-video-meta-box textarea",function(t){e(this).siblings("input[type=hidden]").length&&e(this).siblings("input[type=hidden]").val("")}))})}(jQuery);